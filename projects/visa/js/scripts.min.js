"use strict";function number_format(t,e,i,n){t=(t+"").replace(/[^0-9+\-Ee.]/g,"");var o=isFinite(+t)?+t:0,s=isFinite(+e)?Math.abs(e):0,a=void 0===n?",":n,d=void 0===i?".":i,c="",l=function(t,e){var i=Math.pow(10,e);return""+(Math.round(t*i)/i).toFixed(e)};return c=(s?l(o,s):""+Math.round(o)).split("."),c[0].length>3&&(c[0]=c[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,a)),(c[1]||"").length<s&&(c[1]=c[1]||"",c[1]+=new Array(s-c[1].length+1).join("0")),c.join(d)}$(document).ready(function(){$(".selectmenu").selectmenu(),$(".accordion").accordion({heightStyle:"content",collapsible:!0}),$(".datepicker").datepicker(),$(".dropdown").on("click",function(t){$(this).hasClass("show")?($(this).removeClass("show"),$(this).find(".dropdown-container").stop().slideUp()):($(this).find(".dropdown-container").stop().slideDown(),$(this).addClass("show"))}),$.datepicker.regional.ru={closeText:"Закрыть",prevText:"&#x3c;Пред",nextText:"След&#x3e;",currentText:"Сегодня",monthNames:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthNamesShort:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],dayNames:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"],dayNamesShort:["вск","пнд","втр","срд","чтв","птн","сбт"],dayNamesMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],weekHeader:"Нед",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},$.datepicker.setDefaults($.datepicker.regional.ru),$(".mobile-menu").on("click",function(){$("header nav > ul").stop().slideToggle()});var t=$(".add-price"),e=0,i=0,n=$(".all-price");if(t){var o=$(".radio-input input:checked"),s=o.parents(".radio-input").find(".price-radio").html();o.length&&(s=parseInt(s),i=s,$(".active-price-table").html(s)),t.each(function(){e+=Number($(this).html())}),n.html(e)}$("body").on("click",".checkbox-input",function(){if($(this).data("price")){var i=$(this).data("price"),o=$(this).data("id");$(this).find("input:checked").length?$(this).parents("body").find(o).html(i):$(this).parents("body").find(o).html("0"),e=0,t.each(function(){e+=Number($(this).html())}),n.html(e)}}),$(".radio-input").on("click",function(){var o=$(this).find(".price-radio").html(),s=n.html();o=parseInt(o),$(".active-price-table").html(o),e=0,t.each(function(){e+=Number($(this).html())}),n.html(e),i=o}),$("body").on("click",".delete",function(){var i=$(this).parents(".clone-block").data("price"),o=$(this).parents(".clone-block").find(".add-price").html();$(this).parents(".clone-block").find(".add-price").html(o-i),$(this).parent().remove(),e=0,t.each(function(){e+=Number($(this).html())}),n.html(e)}),$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$("body").on("selectmenuchange",".country",function(t,e){var i=$(this).data("country"),n=e.item.value;console.log(i+" = "+n),$.ajax({url:"/ru/ajax/get_cities",type:"post",data:{country_id:n},success:function(t){var e=$.parseJSON(t);$("body").find(i).html("");for(var n in e)$("body").find(i).prepend("<option value="+e[n].id+">"+e[n].name_ru+"</option>")}})});var a=0,d=0;$("body").on("click",".btn-clone",function(){if(2===$(this).data("content")&&(a+=1),3===$(this).data("content"))if(0===d){var i=$(".wrap-tourist").data("index");i+=1,$(".wrap-tourist").attr("data-index",i),d=i}else d+=1,i=d;var o=$(this).data("price"),s='<div class="wrap-city"><h5>Место</h5><button class="delete" type="button">+</button><div class="input-group display-flex"> <div> <input type="text" placeholder="Город *" name="places['+a+'][city]"></div> <div> <input type="text" placeholder="Гостиница: *" name=places['+a+"][hotel] > </div></div></div>",c='<div class="group"><hr><button class="delete" type="button">+</button><h5>Турист</h5><div class="input-group display-flex"><div><input type="text" placeholder="Имя: *" name="tourists['+i+'][name]"></div><div><input type="text" placeholder="Фамилия: *" name="tourists['+i+'][surname]"> </div><div> <input type="text" placeholder="Отчество: *" name="tourists['+i+'][patronymic]"> </div> <div> <input type="text" placeholder="Пол: *" name="tourists['+i+'][sex]"></div><div><input type="text" placeholder="Дата рождения: *" class="datepicker" name="tourists['+i+'][birthday]"></div><div><select class="selectmenu"><option  disabled selected>Гражданство: *</option><option>Гражданство 1</option><option>Гражданство 2</option><option>Гражданство 3</option><option>Гражданство 4</option></select> </div>        </div><div class="input-group display-flex"> <div> <input type="text" placeholder="Дата открытия визы: *" class="datepicker" name="tourists['+i+'][visa_open]"> </div> <div> <input type="text" placeholder="Паспорт: *" name="tourists['+i+'][passport]"> </div> <div> <input type="text" placeholder="Дата выдачи паспорта:" class="datepicker" name="tourists['+i+'][passport_got]"> </div> <div> <input type="text" placeholder="Действителен до: *" class="datepicker" name="tourists['+i+'][passport_expire]">             </div> </div> <div class="wrap-input-group"> <div class="input-group display-flex"> <div> <select class="selectmenu country" data-country=".country-list-'+i+'" name="tourists['+i+'][visa_country]"> <option  disabled selected>Страна получения визы: *</option> '+option_list+'</select> </div><div><select class="selectmenu country-list-'+i+'" id="" name="tourists['+i+'][visa_city]"><option  disabled selected class="selected">Город получения визы: *</option></select></div><div><select class="selectmenu country" data-country=".residence-list-'+i+'" name="tourists['+i+'][country]"><option disabled="" selected="">Страна проживания: *</option>'+option_list+'</select></div><div><select class="selectmenu residence-list-'+i+'" name="tourists['+i+'][city]"><option disabled="" selected="">Город проживания: *</option></select></div><div><select class="selectmenu country" data-country=".born-list-'+i+'" name="tourists['+i+'][born_country]"><option disabled="" selected="">Страна рождения: *</option>'+option_list+'</select></div><div><select class="selectmenu born-list-'+i+'" name="tourists['+i+'][born_country]"><option disabled="" selected="">Город рождения: *</option></select></div>                                  <div> <input type="text" placeholder="Компания работника: *" name="tourists['+i+'][company]"> </div> <div> <input type="text" placeholder="Тип бизнеса вашей компании: *" name="tourists['+i+'][company_type]"> </div> <div> <input type="text" placeholder="Должность работника: *" name="tourists['+i+'][function]"> </div> <div> <input type="text" placeholder="Адрес компании: *" class="datepicker" name="tourists['+i+'][company_address]"> </div> <div> <input type="tel" placeholder="Телефон компании: *" name="tourists['+i+'][company_phone]"> </div> </div> <div class="wrap-file-input"> <p>Фото или сканированная копия <br>первой страницы паспорта:</p> <div class="file-input"> <input type="file" id="file'+i+'" name="tourists['+i+'][photos][0]"> <label for="file'+i+'">Выберите файл</label> </div> </div> </div></div> \x3c!-- .wrap-input-group --\x3e';if(1===$(this).data("content")?$(this).parents(".clone-block").find(".content-clone").append('<div class="invitation-clone"><button class="delete" type="button">+</button><h5>Турист</h5><div class="input-group display-flex"><div><input type="text" placeholder="Имя: *"></div><div><input type="text" placeholder="Фамилия: *"> </div> <div> <input type="text" placeholder="Пол: *"></div><div><input type="text" placeholder="Дата рождения: *" class="datepicker"></div><div><select class="selectmenu"><option  disabled selected>Гражданство: *</option><option>Гражданство 1</option><option>Гражданство 2</option><option>Гражданство 3</option><option>Гражданство 4</option></select> </div> <div> <input type="text" placeholder="Паспорт: *"> </div> <div> <input type="text" placeholder="Действителен до: *" class="datepicker"> </div></div></div>'):2===$(this).data("content")?$(this).parents(".clone-block").find(".content-clone").append(s):3===$(this).data("content")&&$(this).parents(".clone-block").find(".content-clone").append(c),$(this).data("price")>0){var l=$(this).parents(".clone-block").find(".add-price").html();$(this).parents(".price-block").find(".add-price").html(Number(l)+o)}e=0,t.each(function(){e+=Number($(this).html())}),n.html(e),$(".selectmenu").selectmenu(),$(".datepicker").datepicker()}),$(".terms-use").on("click",function(){var t=$(this).find("#terms-use:checked");console.log(t.length),t.length?$('[type="submit"]').removeAttr("disabled"):$('[type="submit"]').attr("disabled","disabled")})});